# Copyright (C) 2000 Simon Wright. All Rights Reserved.
#
#      This program is free software; you can redistribute it
#      and/or modify it under the terms of the Ada Community
#      License which comes with this Library.
#
#      This program is distributed in the hope that it will be
#      useful, but WITHOUT ANY WARRANTY; without even the implied
#      warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
#      PURPOSE. See the Ada Community License for more details.
#      You should have received a copy of the Ada Community
#      License with this library, in the file named "Ada Community
#      License" or "ACL". If not, contact the author of this library
#      for a copy.
#

# $Id$

# (GNU) Makefile for test of Booch Components distribution.

########
# Tests

GNATMAKE_FLAGS = -I.. -O2 -g -gnata -gnatwu -gnatwl

test: testable
	for t in $(TESTABLE); do \
	  echo running $$t; \
	  ./$$t 2>$$t.log; \
	done

concurrent_test: concurrent_testable
	for t in $(CONCURRENT_TESTABLE); do \
	  echo running $$t; \
	  ./$$t 2>$$t.log; \
	done

TESTABLE += avl_test
avl_test: force
	gnatmake $(GNATMAKE_FLAGS) $@

TESTABLE += bag_test
bag_test: force
	gnatmake $(GNATMAKE_FLAGS) $@

TESTABLE += collection_test
collection_test: force
	gnatmake $(GNATMAKE_FLAGS) $@

TESTABLE += graph_test
graph_test: force
	gnatmake $(GNATMAKE_FLAGS) $@

TESTABLE += list_test
list_test: force
	gnatmake $(GNATMAKE_FLAGS) $@

TESTABLE += map_test
map_test: force
	gnatmake $(GNATMAKE_FLAGS) $@
CONCURRENT_TESTABLE += map_test_concurrent
map_test_concurrent: force
	gnatmake $(GNATMAKE_FLAGS) $@

TESTABLE += ordered_collection_test
ordered_collection_test: force
	gnatmake $(GNATMAKE_FLAGS) $@

TESTABLE += ordered_queue_test
ordered_queue_test: force
	gnatmake $(GNATMAKE_FLAGS) $@

TESTABLE += queue_test
queue_test: force
	gnatmake $(GNATMAKE_FLAGS) $@

TESTABLE += ring_test
ring_test: force
	gnatmake $(GNATMAKE_FLAGS) $@

TESTABLE += set_test
set_test: force
	gnatmake $(GNATMAKE_FLAGS) $@

TESTABLE += smart_test
smart_test: force
	gnatmake $(GNATMAKE_FLAGS) $@

TESTABLE += stack_test
stack_test: force
	gnatmake $(GNATMAKE_FLAGS) $@

TESTABLE += tree_test
tree_test: force
	gnatmake $(GNATMAKE_FLAGS) $@

testable: $(TESTABLE)

concurrent_testable: $(CONCURRENT_TESTABLE)

.PHONY: force

# Emacs variable settings
# Local Variables:
# mode : makefile
# End:
