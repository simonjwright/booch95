# Copyright (C) 2001 Simon Wright. All Rights Reserved.
#
#      This program is free software; you can redistribute it
#      and/or modify it under the terms of the Ada Community
#      License which comes with this Library.
#
#      This program is distributed in the hope that it will be
#      useful, but WITHOUT ANY WARRANTY; without even the implied
#      warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
#      PURPOSE. See the Ada Community License for more details.
#      You should have received a copy of the Ada Community
#      License with this library, in the file named "Ada Community
#      License" or "ACL". If not, contact the author of this library
#      for a copy.
#

# $Id$

# (GNU) Makefile for test of Booch Components distribution.

GNATMAKE=gnatmake

#####################
# Default build rule
%: %.adb
	$(GNATMAKE) $(GNATMAKE_FLAGS) $@

########
# Tests

GNATMAKE_FLAGS = -I.. -O2 -g -gnata -gnatf -gnatwu -gnatwl -gnaty

test: testable
	for t in $(TESTABLE); do \
	  echo running $$t; \
	  ./$$t 2>&1; \
	done

concurrent_test: concurrent_testable
	for t in $(CONCURRENT_TESTABLE); do \
	  echo running $$t; \
	  ./$$t 2>&1; \
	done

TESTABLE += avl_test
avl_test: force

TESTABLE += bag_test
bag_test: force

TESTABLE += collection_test
collection_test: force

TESTABLE += graph_test
graph_test: force

TESTABLE += list_test
list_test: force

TESTABLE += map_test
map_test: force
CONCURRENT_TESTABLE += map_test_concurrent
map_test_concurrent: force

TESTABLE += ordered_collection_test
ordered_collection_test: force

TESTABLE += ordered_queue_test
ordered_queue_test: force

TESTABLE += queue_test
queue_test: force
CONCURRENT_TESTABLE += queue_test_concurrent
queue_test_concurrent: force

TESTABLE += ring_test
ring_test: force

TESTABLE += set_test
set_test: force

TESTABLE += smart_test
smart_test: force

TESTABLE += sort_test
sort_test: force

TESTABLE += stack_test
stack_test: force

TESTABLE += tree_test
tree_test: force

testable: $(TESTABLE)

concurrent_testable: $(CONCURRENT_TESTABLE)

.PHONY: force

# Emacs variable settings
# Local Variables:
# mode : makefile
# End:
