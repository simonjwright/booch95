<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML VERSION="2.0">
<HEAD>
<TITLE>The Ada95 Booch Components (Compiler problems)</TITLE>
</HEAD>

<BODY BGCOLOR="#ffffff">

<H1><IMG SRC="ada95lgo.gif" ALT="Compiler problems" ></H1>

<p><i>Compiler problems</i></p>

<P><IMG SRC="greenline.gif" ALT="--" WIDTH="600" HEIGHT="4" ></P>

<dl>

<dt><a name="31nov2001a">30 November 2001</a>

<dd><tt>BC.Copy</tt>, <tt>BC.Filter</tt> can't be used under
ObjectAda 7.2, AdaMULTI 3.1 or Apex 3.0.0b; they think the

<pre>
  with package Source is new BC.Containers (Item);
</pre>

is illegal because it derives from a controlled type at other than
library level. Tucker Taft says they are wrong.

<dt><a name="31nov2001b">30 November 2001</a>

<dd>ObjectAda 7.2 can't compile <tt>sort_test.adb</tt> (internal
failure).

<dt><a name="13aug2000">13 August 2000</a></dt>

<dd>

The new work on providing Synchronized and Guarded forms has thrown up
a disagreement between compilers.<p>

GNAT 3.12, APEX NT 3.0.2b and Aonix 7.2 get very confused; GNAT 3.13
is happy.<p>

You can see an approximation to the code <a href="x.ada">here</a>.<p>

</dd>

<dt><a name="29may1999">29 May 1999</a></dt>

<dd>

A procedure and a protected type entry in the same scope had the
same name; you can't rely on the fact that only entries can have
<tt>'Caller</tt> applied.<p>

GNAT 3.11p was (incorrectly) resolving the name; it should be
qualified with the protected type's name.<p>

See <tt>bc-support-synchronization.adb</tt>
(<tt>Semaphore_Type.Seize</tt>).<p>

</dd>

<dt><a name="4may1999">4 May 1999</a></dt>

<dd>

Under ObjectAda Special Edition Version 7.1, the current
implementation of <tt>BC.Support.Synchronization</tt>'s
<tt>Semaphore</tt> fails.<p>

</dd>

<dt><a name="13mar1999">13 March 1999</a></dt>

<dd>
<a href="mailto:woodruff1@llnl.gov">John P. Woodruff</a> reports
problems building the last few releases of the Components with the
Rational Apex compiler.<p>

He reported the compiler defect to Rational, and they have issued a patch.
As patched, Apex 3.0.0b now does compile the entire suite correctly.<p>

The Apex version needed has the following version mark:<p>

<pre>
Apex/Summit PATCH: 199903042-1  Installed by ratadmin on Mar 9 08:45
    This patch contains fixes for the following defects, for
    additional information on the fixes refer to the file
    $APEX_HOME/install/patches/Solaris_Desc_990304
</pre>

</dd>

<dt><a name="29jan1999">29 January 1999</a></dt>

<dd>
<dl>

<dt><b>Iterators</b></dt>

<dd>The new Iterators work correctly under GNAT 3.11p and ObjectAda
Special Edition Version 7.1.
</dd>

<dt><b>ObjectAda Special Edition Version 7.1</b></dt>

<dd>
There are special versions of the Map, Queue and Stack test drivers
which avoid using the Dynamic forms:

<pre>
map_test_aonix.adb
queue_test_aonix.adb
stack_test_aonix.adb
</pre>

Don't use the test driver <t>storage.adb</t>.
</dd>

</dl>
</dd>

<p>
<dt><a name="23jan1999">23 January 1999</a></dt>

<dd>
<dl>

<dt><b>Iterators</b></dt>

<dd>The new Iterators break GNAT 3.10p. 3.11b is OK, so with any luck
the forthcoming 3.11p will be too!
</dd>

<dt><b>ObjectAda Special Edition Version 7.1</b> and Dynamic forms</dt>

<dd>These are still broken.</dd>

</dl>
</dd>

<p>
<dt><a name="20oct1998">20 October 1998</a></dt>

<dd>
<dl>

<dt><b>Graph passive iterators</b></dt>

<dd>The passive iterators in <tt>BC.Graphs.Directed</tt> and
<tt>BC.Graphs.Undirected</tt> break GNAT 3.10p and 3.11a1.
3.11b is OK, so with any luck the forthcoming 3.11p will be too!
</dd>

<dt><b>ObjectAda Special Edition Version 7.1</b> and Dynamic forms</dt>

<dd>We have an update on this; the impression is that OA has trouble
with unconstrained types being allocated on a user-supplied storage
pool. The dynamic forms use an unconstrained array for storage.<br>
(As a note, the dynamic forms aren't as efficient as Grady Booch
intended, because of a code translation problem! this will be
addressed ...)
</dd>

<dt><b>ObjectAda Special Edition Version 7.1</b> and Managed Store</dt>

<dd>We've supplied a new version of <tt>BC.Support.Managed_Storage</tt>
which compiles under OA.
</dd>

<dt><b>ObjectAda Special Edition Version 7.1</b> and <tt>Graph_Test</tt></dt>

<dd>The compiler fails (internal assertion failure) while compiling
Graph_Test. However, the demo program Ada_Units works as intended.
</dd>

</dl>
</dd>

<p>
<dt><a name="6oct1998">6 October 1998</a></dt>

<dd>When <a href="mailto:pat@classwide.com">Pat Rogers</a> added Storage
Management, we found problems with different compilers. I guess this is
an area of the language that's not been very heavily used up to now.
<br>
<dl>

<dt><b>GNAT 3.10p</b></dt>
<dd>No problems.</dd>

<dt><b>GNAT 3.11a1</b></dt>
<dd>No problems.</dd>

<dt><b>GNAT 3.11b</b></dt>
<dd><tt>BC.Support.Unmanaged_Storage</tt> failed to compile.
<br>We've worked round the problem by a (nugatory) view conversion
from what should have been a classwide attribute value already
(<tt>'Storage_Pool</tt>).
</dd>

<dt><b>ObjectAda Special Edition Version 7.1</b></dt>
<dd><tt>BC.Support.Managed_Storage</tt> fails to compile.
<br><tt>BC.Support.Unmanaged_Storage</tt> compiles but the resulting
programs generate exceptions during elaboration of Dynamic forms
of Stacks, Queues.
<br>We don't yet have workrounds for these, so for the time being
ObjectAda users should avoid using Managed Storage and Dynamic forms
with this release (if you want to help find a solution/our mistake,
though, please feel free!) 
</dd>

</dl>

</dd>

</dl>

<P><IMG SRC="greenline.gif" ALT="--" WIDTH="600" HEIGHT="4" ></P>

<P><A HREF="index.html">[index]</A></p>

<p><i>
<script>
document.write("Last update: ");
document.write(document.lastModified);
</script>
</i></p>

</BODY>
</HTML>
