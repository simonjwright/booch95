<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML VERSION="2.0">
<HEAD>
<TITLE>The Ada95 Booch Components (Release notes)</TITLE>
</HEAD>

<BODY BGCOLOR="#ffffff">

<H1><IMG SRC="ada95lgo.gif" ALT="The Ada 95 Booch Components" ></H1>

<p><i>Release notes</i></p>

<!-- Begin Mind It Box -->
<form method=POST action="http://minder.netmind.com/mindit.shtml">
<table border=0 cellpadding=5 cellspacing=0 bgcolor=#005599>
<tr><td align=center colspan=2>
<font face=arial,helvetica size=-1 color=#ffffff>
<b>Receive email when this page changes</b>
</td></tr><tr><td>
<input type=text value="Enter email address" name="EMAIL" size=20></td><td rowspan=2>
<input type="image" src="http://www.netmind.com/html/mindit.gif" border="0" width="76" height="28">
<br><font face=arial,helvetica size=-2 color=#ffffff><center>
<b>Click Here</td></tr>
<tr valign=top><td colspan=1 align=center>
<font face=arial,helvetica size=-2 color=#ffffff>•<b> Powered by Netmind </b>•
</td></tr></table></form>
<!-- End Mind It Box -->

<P><IMG SRC="greenline.gif" ALT="--" WIDTH="600" HEIGHT="4" ></P>

<dl>

<dt>dd mmm 2001</dt>

<dd>

<h3>Interface changes</h3>

<p><font color="red">The way Storage Management is specified has
changed significantly</font>: you now supply a single generic
parameter of type
<tt>System.Storage_Pools.Root_Storage_Pool'Class</tt>.

<br>This will be painful to start with, but should simplify matters in
the long run.

<p>The version of <tt>Sets.Add</tt> that doesn't tell you if the newly
added Item was in fact already there becomes a primitive operation
rather than a class-wide one.

<p><tt>BC.Containers.Maps.Hash_Statistics</tt> didn't work for Bounded
Maps.


<h3>Documentation changes</h3>

<p>Added commentary to <tt>BC.Copy</tt>, <tt>BC.Filter</tt>.


<h3>Implementation changes</h3>

<p>Continued indenting to the GNAT defaults.


<p>

</dd>

<dt>19 Aug 2001</dt>

<dd>


<h3>Documentation changes</h3>

<p>Began work on a <a href="case-study.html">case study</a>.


<h3>Implementation changes</h3>

<p>Added a <tt>with abort</tt> to a <tt>requeue</tt> in
<tt>BC.Support.Synchronization</tt>.


<p>Bounded Bags, Maps and Sets use a bounded hash table. This reduces
the space requirement considerably and means that the
<tt>Available</tt> function returns the correct value.


<p>Began re-indenting to the GNAT default (basically, 3 spaces
standard indent, 2 spaces for continuations).


<p>

</dd>

<dt>13 May 2001</dt>

<dd>


<h3>Interface changes</h3>


<p>Added <tt>BC.Containers.Quicksort</tt>,
<tt>BC.Containers.Shellsort</tt> generics (implemented as child
packages, on the theory that you won't want the clutter in
<tt>BC.Containers</tt> if you don't need it).


<p>Removed <tt>BC.Containers.Copy</tt>, <tt>BC.Containers.Filter</tt>
generics.


<p>Bounded forms have an <tt>Available</tt> function, returning the
number of free entries. The same function is now available for Dynamic
and Unbounded forms (in which case it returns <tt>Natural'Last</tt>;
just don't believe it!


<p>Added Synchronized forms for Dynamic and Unbounded Maps.


<p>Added <tt>BC.Containers.Maps.Hash_Statistics</tt> to report how
well the hashing algorithm is doing. Easy enough to do the same for
Bags, Sets ..


<h3>Implementation changes</h3>


<p>Added noisy exception handlers to all the test programs .. 


<p>.. because an assertion in the Bounded Container support package
was off by one, and the test programs were putting GNAT's exception
message in a log file that was a relic of the old malloc checking.


<p>Unbounded Maps missed out on the 20010325 change in which
Containers no longer allocated their representation from the heap;
fixed.


<p>Synchronized Maps didn't override <tt>"="</tt>.


<p>The GNAT <a href="compiler-problems.html#29may1999">compiler
problem</a> (GNAT was too permissive) noted in the June 1999 release
is still there .. fixed, I hope, in
<tt>BC.Support.Synchronization</tt>.<br/>

I think the reason I've not seen this problem is that I've never been
able to get the concurrency support working with the free versions of
the Aonix compiler. The least I can do is to try compiling
synchronization support on its own! .. and OA 7.2 would have found
it. Apologies.


<p>


</dd>


<dt>25 March 2001</dt>

<dd>


<p>Containers no longer allocate their representation from the
heap. This particularly affects Bounded forms, which no longer use the
heap at all (at any rate in non-Guarded, non-Synchronized forms).


<p>Bounded forms now use a strategy derived from that in the C++
Components to minimise the amount of data copying on insertion and
removal.


<p>Lists no longer allow the use of <tt>Remove</tt> to delete an
element that is aliased by another List (the new exception
<tt>BC.Referenced</tt> will be raised).

<br>I hope this won't upset too many of you, but if you were using
this feature you were living dangerously! miscalculated reference
counts, dangling pointers, ... the simplest thing to do is to
<tt>Clear</tt> the second List.


<p>For consistency, what were the Bounded forms' <tt>Size</tt>
parameters are now all <tt>Maximum_Size</tt>.


<p>For consistency, the Dynamic forms' <tt>Create</tt> operation has
been replaced by a new generic parameter <tt>Initial_Size</tt>.


<p>Added generic <tt>Copy</tt>, <tt>Filter</tt> functions to
<tt>BC</tt>; this allows you to copy or filter between different
instantiations of <tt>BC.Containers</tt> (for the same Item type, of
course).

<br>I think these remove the need for <tt>BC.Containers.Copy</tt>,
<tt>BC.Containers.Filter</tt>.


<p>If <tt>AVL_Tree.Insert</tt> finds that there is already an element
which compares equal to the given element, it now replaces the
existing element. This is in case you have important non-key record
components that you wish to change.

<br> An alternative strategy in this situation is to make the actual
item type a pointer to your record, so that you can change the
indicated non-key fields as required (<em>not</em> the key fields,
please!)

<p>

</dd>


<dt>21 January 2001</dt>

<dd>

<h3>Interface changes</h3>

For Containers with Bounded, Dynamic and Unbounded forms the concrete
types no longer include the form name; thus,
<tt>BC.Containers.Maps</tt> declares <tt>Abstract_Map</tt>, while
<tt>BC.Containers.Maps.Unbounded</tt> declares <tt>Map</tt>.

<p>The concrete Lists are now declared as plain <tt>List</tt> rather
than <tt>Single_List</tt>, <tt>Double_List</tt> (there is no
<tt>Abstract_List</tt>, perhaps there should be!).

<p>The concrete Graphs, Vertices and Arcs are now declared as plain
<tt>Graph</tt>, <tt>Vertex</tt> and <tt>Arc</tt> (and the abstract
types in <tt>BC.Graphs</tt> are <tt>Abstract_Graph</tt>,
<tt>Abstract_Vertex</tt>, and <tt>Abstract_Arc</tt>).

<p>Maps now have the standard Container generic type <tt>Item</tt> as
the range, and the Map generic type <tt>Key</tt> as the domain. If you
are a Map user, you'll have to change your code's logic (as well as
the type names, see above).

<p>Added generic <tt>Copy</tt>, <tt>Filter</tt> functions to
<tt>BC.Containers</tt>.

<h3>Implementation changes</h3>

<p>Hash functions (for Bags, Maps, Sets) now expected to return
<tt>Natural</tt> rather than <tt>Positive</tt>.

<p>The Map comments used to claim that Maps cache references. This was
not true.

<p>Removed Dynamic Queues' Create(Size) operation (now a generic
parameter); for use with synchronized Queues. The problem is that this
was a function, so derived types would have had to override it.<br>
This change will have to apply to other Dynamic forms.

<p>Added a Pop_Value operation for Queues; semantically necessary for
synchronized Queues.

<p>Removed the unnecessary (illegal?) Initialize(Ring_Iterator) operation.

<p>Iterators are visibly Controlled. The Controlled bit is because of
work on synchronized forms, and the visible bit is because of a GNAT
3.13 problem with finalization when using a function return value to
initialize a classwide value.

<p>Lots of work on <tt>BC.Support.Synchronization</tt>.

<p>

</dd>

<dt>30 September 2000</dt>

<dd>

<p>Implemented the remaining Bounded and Dynamic forms (Collections,
Deques, Ordered Collections, Ordered Queues, Queues and Rings).<p>

Added a <tt>Null_Container</tt> operation, so users can initialize
structures containing Containers.<p>

Began an alternative approach to the provision of Guarded and
Synchronized forms. You can see this in
<tt>BC.Containers.Guarded</tt>,
<tt>BC.Containers.Maps.Synchronized</tt> and
<tt>Map_Test_Concurrent</tt>. Unfortunately there seems to be <a
href="compiler-problems.html#13aug2000">a disagreement between
compilers</a> about this one!<p>

Fixed an error in passive modifying iteration, where the first element
was visited repeatedly. This has changed
<tt>BC.Containers.Access_Current_Item</tt>'s profile.<p>

</dd>

<dt>4 June 2000</dt>

<dd>

<p>Added Deques (in the Unbounded form only so far).<p>

In AVL Trees and Lists, removed the <tt>aliased</tt> specification on
elements, which forces the element to be constrained even if the
discriminant has a default.<p>

In response to a report from <a
href="mailto:dennsion@ssd.fsi.com">T&nbsp;E&nbsp;Dennison</a>, speeded
up the creation of Iterators. Note, this requires that iterators be
declared of type <tt>Containers.Interator'Class</tt>, and initialized
at the point of declaration.<p>

Copying of Ordered Collections using <tt>Collections.Copy</tt> is now
stable.<p>

Removed unnecessary private operations on some Containers.<p>

Synchronized Unbounded Maps had no <tt>"="</tt> operation.<p>

The added Map iterator features (which allow access to the
<tt>Value</tt>) have been reworked in the same style as the standard
Container iterators. They are only available when the
<tt>Iterator</tt> concerned is viewed as a <tt>Map_Iterator</tt>.<p>

Smart Pointers now have a <tt>Null_Pointer</tt> declaration.<p>

Bounded forms didn't properly implement equality (thanks to <a
href="mailto:wymbdd@hotmail.com">Mark Bond</a> for this one).<p>

Hash tables now compile with APEX as well as GNAT and ObjectAda 7.1.<p>

Reorganised the source files so that tests and demos go in
subdirectories.<p>

</dd>

<dt>19 February 2000</dt>

<dd>

<p>Uses signature-based Hash Tables (for Bags, Maps, Sets).<p>

Includes Guarded and Synchronized Maps.<p>

</dd>

<dt>3 January 2000</dt>

<dd>

<p>Added the ability to delete the item an <tt>Iterator</tt> is currently
indicating
(<tt>Delete_Item_At&nbsp;(It&nbsp;:&nbsp;Iterator)</tt>). Note, this
feature doesn't yet work for Bags, Maps, Rings or Sets.<p>

The C++ code offers two variants of accessors such as
<tt>Queues.Front</tt>, one of which returns a value while the other
returns a reference. The second case is now supported by generics such
as eg <tt>Queues.Process_Front</tt>.<p>

The <tt>Copy</tt> operation of Collections, Queues, Rings and Stacks
checks for self-assignment before proceeding.<p>

Synchronized Unbounded Rings now support blocking (balking); eg, an
attempt to <tt>Pop</tt> will block until the Ring has something in it
to pop. For related reasons, the <tt>Pop_Value</tt> operation is
provided.<p>

AVL Trees had an error (inherited from the C++) which would sometimes
corrupt the Tree on deletion.<p>

Containers have new versions of the <tt>Visit</tt> and <tt>Modify</tt>
generics that include a parameter as an argument to <tt>Visit</tt> and
<tt>Modify</tt> that is passed to the <tt>Apply</tt> routine. Thanks
to <a href="mailto:SteveD@WOODLAND.USNR.com">Steve Doiel</a>.<p>

Added <tt>pragma Elaborate_Body</tt> throughout.<p>

Continued the renaming of <tt>Container</tt> parameters from
<tt>Obj</tt> to something slightly more mnemonic.<p>

</dd>

<dt>31st October 1999</dt>

<dd>

<p>Added Unbounded Ordered Queues.<p>

AVL Trees are no longer limited.<p>

Corrected ordering problem with Unbounded Ordered Collections when
keys are equal. <tt>Insert</tt> now adds from the front of the
Collection, <tt>Append</tt> from the rear.<p>

</dd>

<dt>21st June 1999</dt>

<dd>

<p>Added Unbounded Collections and Unbounded Ordered Collections.<p>

<tt>BC.Support.Bounded</tt>, <tt>BC.Support.Unbounded</tt> subprogram
specs were confused about whether indexing was from 0 (as in the C++)
or 1 (in the Ada). <tt>BC.Support.Unbounded.Append(2)</tt> had an
error when appending after the first element.<p>

Corrected a GNAT <a href="compiler-problems.html#29may1999">compiler
problem</a> (GNAT was too permissive).<p>

Added ObjectAda-special versions of the Bag test driver (avoiding <a
href="compiler-problems.html#29jan1999">compiler problems</a>).<p>

</dd>

<dt>7th May 1999</dt>

<dd>

<p>Included the accidentally-omitted Bounded and Dynamic Bag sources.<p>

<dd>

<dt>4th May 1999</dt>

<dd>

Added Bounded and Dynamic Bags.<p>

Added Unbounded Rings in standard, Guarded and Synchronized forms.<p>

ObjectAda <a href="compiler-problems.html#4may1999">problems</a> with
Semaphores.<p>

</dd>

<dt>14th March 1999</dt>

<dd>

<p>Eliminated a problem where a function call, used only for its side
effect and not for its result, was deleted by high optimisation
levels (<tt>-O3</tt>).<p>

Passive iteration (in <tt>BC.Containers</tt>) didn't reset the
passed-in <tt>Iterator</tt>.<p>

<a href="compiler-problems.html#13mar1999">Notes</a> from <a
href="mailto:woodruff1@llnl.gov">John P. Woodruff</a> on use with
Rational Apex.<p>

Added a word-counter demo, as suggested by <a
href="mailto:J.English@bton.ac.uk">John English</a> in the <a
href="http://www.suffix.com/Ada/SCL/">Ada Standard Component Library
Working Group</a>.<p>

Further <a href="contrib/">contributions</a>.<p>

</dd>

<dt>21st February 1999</dt>

<dd>

<p>Containers require a (defaultable) <tt>"="</tt> operation for
Items.<p>

Added Bags (only in the Unbounded form so far).<p>

Added Sets.<p>

Reworked Iteration; passive iteration now obtains the Container over
which to iterate via an Iterator bound to the container. This allows
different styles of iteration with one interface.<p>

Graphs have three Vertex iterators: incoming only, outgoing only, both
ways.<p>

Binary trees have in-order, pre-order and post-order iterators;
Multiway trees have pre-order and post-order iterators. Only passive
iteration is available, and the style is different from that of other
Containers.<p>

If a section of a list which didn't contain a shared node was purged,
an invalid pointer access (Constraint_Error) would occur. This error
was in the C++ (where it was OK, it seems, to <tt>free()</tt> a null
pointer).<p>

Assignment involving unbounded forms didn't correctly invalidate the
cache in the copy.<p>

Began a <a href="demos.html">demos</a> page.<p>

Began a <a href="contrib/">"contributions"</a> section, with
initial contributions from <a
href="mailto:Daniel.Gaudry@wanadoo.fr">Daniel Gaudry</a>.<p>

</dd>

<dt>29 January 1999</dt>

<dd>

<p>Corrected an error in AVL trees (only the second one that is an error
in the original C++ and not in the translation!).<p>

Added ObjectAda-special versions of test drivers (avoiding <a
href="compiler-problems.html#29jan1999">compiler problems</a>).<p>

Removed a use of the GNAT-special <tt>'Img</tt> attribute.<p>

Removed a couple of badly-placed <tt>pragma Inline</tt>s.<p>

</dd>

<dt>24 January 1999</dt>

<dd>

<p>Added Maps.<p>

Added AVL Trees.<p>

Removed some abbreviations; for instance, in
<tt>BC.Containers.Stacks.Unbounded</tt>, the type <tt>Unb_Stack</tt>
becomes <tt>Unbounded_Stack</tt>. <em><font color="red">These changes
will break existing code.</font></em><p>

Reworked Iteration throughout, with a <em><font color="green">vast
improvement in the efficiency of List iterators</font></em>. <em><font
color="red">These changes will break existing code</font></em>; <a
href="compiler-problems.html#23jan1999">compiler problems</a> mean
that <em><font color="red">you can't use GNAT 3.10p</font></em>.<p>

Moved Graph iterators up to the parent package (<tt>BC.Graphs</tt>),
and included a little demonstration of Graph usage
(<tt>Ada_Units</tt>).<p>

For consistency, the concrete Graph, Vertex and Arc types are now
prefixed with <tt>Undirected_</tt> or <tt>Directed_</tt> as
appropriate; eg, a directed Vertex becomes
<tt>Directed_Vertex</tt>.<p>

</dd>

<dt>20 October 1998</dt>

<dd>

<p>Added Graphs. There are more <a
href="compiler-problems.html#20oct1998">compiler problems</a>, I'm
afraid, though we have found a workround for one of the old ones.<p>

Internal changes in Storage Management.<p>

</dd>

<dt>6 October 1998</dt>

<dd>

<p>Updated notes on <a href="compiler-problems.html#6oct1998">compiler
problems</a> to give a workround for users of ObjectAda 7.1 Special
Edition.<p>

</dd>

<dt>4 October 1998</dt>

<dd>

<p>Storage Management added, thanks to <a
href="mailto:pat@classwide.com">Pat Rogers</a>. This has tickled some
<em><font color="red">compiler problems</font></em>, <a
href="compiler-problems.html">please check to see if you're
affected</a>.<p>

Fixed inefficiency in Unbounded (and perhaps Dynamic) forms of Queues
and Stacks.<p>

Storage Management for Dynamic and Unbounded forms required that we
instantiate some support packages inside the using generic rather than
having the user pre-instantiate them. We decided to adopt the same
policy for Bounded forms too. <em><font color="red">These changes will
break existing code.</font></em><p>

Added some comments to package specs.<p>

Added some minor demo code (<tt>storage</tt>, <tt>time_lists</tt> and
<tt>time_queues</tt>).<p>

</dd>

<dt>24 August 1998</dt>

<dd>

<p>Bugfix release.<p>

<p>There were several storage leaks.<p>

It's illegal to declare abstract subprograms in a private part.<p>

The Stack and Queue iterators were broken (by sjw).<p>

</dd>

<dt>1 August 1998</dt>

<dd>

<p>First release by <a href="mailto:simon@pogner.demon.co.uk">Simon
Wright</a>. Added Binary and Multiway Trees, Smart Pointers.<p>

</dd>

</dl>

<P><IMG SRC="greenline.gif" ALT="--" WIDTH="600" HEIGHT="4" ></P>

<P><A HREF="index.html">[index]</A></p>

<p><i>
<script>
document.write("Last update: ");
document.write(document.lastModified);
</script>
</i></p>

</BODY>
</HTML>
